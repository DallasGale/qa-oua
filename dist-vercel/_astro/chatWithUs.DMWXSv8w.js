import{j as G}from"./jsx-runtime.B6Po9dQa.js";import{r as Qe}from"./index.DzGH6zwW.js";import{c as he}from"./index.95d291e9.C0RenP7k.js";import{u as An}from"./useUtagTracking.Ba3vyx_k.js";const Nn={src:"/_astro/chat.X_lFpVQp.svg",width:24,height:25,format:"svg"},Mn={WRONG_ENGAGEMENT_TYPE:"WrongEngagementType",LP_TAG_LOAD_TIMEOUT:"LpTagLoadTimeout",LP_TAG_INIT_TIMEOUT:"LpTagInitTimeout"},Un=(e,t)=>{const n=setInterval(()=>{t.tagCheckCount++,window.lpTag&&!window.lpTag.loaded&&(t.currentState="tagOnPage"),window.lpTag&&window.lpTag.loaded&&(t.currentState="tagResolved",t.tagResolved=new Date().getTime()-t.startTime,clearInterval(n),((r,o)=>{window.lpTag.events.bind("lpUnifiedWindow","windowClosed",function(){r.onChatWindowClosed()}),window.lpTag.events.bind("lpUnifiedWindow","state",function(i){i.state==="init"&&r.onChatWindowOpened()}),window.lpTag.events.bind({appName:"LP_OFFERS",eventName:"OFFER_IMPRESSION",triggerOnce:!0,async:!0,func:function(i){if(i.state===1&&i.engagementType===5){const a=i.engagementId;o.currentState="offerImpressionOnline",o.offerImpressionOnline=new Date().getTime()-o.startTime;const u=setInterval(()=>{o.liveChatCheckCount++,window.lpTag&&window.lpTag.taglets&&window.lpTag.taglets.rendererStub&&window.lpTag.taglets.rendererStub.getEngagementInfo(a).state===1&&(clearInterval(u),o.currentState="rendererStubReady",o.rendererStubReady=new Date().getTime()-o.startTime,o.duration=new Date().getTime()-o.startTime,r.onChatReady({launchChat:function(){window.lpTag.taglets.rendererStub.click(a)}}))},100)}else o.duration=new Date().getTime()-o.startTime,r.onErrorLoadingChat(Mn.WRONG_ENGAGEMENT_TYPE)}})})(e,t))},100)},Dn=({disabled:e,skipInitialisingChat:t,logger:n,onClosingChat:r})=>{const[o,i]=Qe.useState({isChatLoading:!0,errorLoadingChat:!1,isCurrentlyChatting:!1,launchChat:()=>{}});return Qe.useEffect(()=>{const a={currentState:"",startTime:new Date().getTime(),tagResolved:0,tagCheckCount:0,offerImpressionOnline:0,rendererStubReady:0,liveChatCheckCount:0,duration:0};if(t||e)return void i(()=>({launchChat:()=>console.log("Fake launch of chat"),isCurrentlyChatting:!1,isChatLoading:!1,errorLoadingChat:!1}));Un({onErrorLoadingChat:s=>{n?.error("Error loading chat",{errorDetails:s,...a}),i(c=>({...c,isChatLoading:!1,errorLoadingChat:!0}))},onChatReady:s=>{n?.info("Chat initialised",{...a}),i(c=>({...c,isChatLoading:!1,launchChat:s.launchChat}))},onChatWindowOpened:function(){i(s=>({...s,isCurrentlyChatting:!0}))},onChatWindowClosed:function(){r&&r(),i(s=>({...s,isCurrentlyChatting:!1}))}},a);let u=0;const l=setInterval(()=>{i(s=>(u++,s.isChatLoading?(u===1&&n?.warn("Chat load time > 5 seconds",{errorDetails:"It is taking longer than 5 seconds",...a}),u===2&&(n?.error("Chat load time > 10 seconds",{errorDetails:"It is taking longer than 10 seconds",...a}),clearInterval(l))):clearInterval(l),s))},5e3);return()=>clearInterval(l)},[]),{...o}};var y={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},I=console,H={};Object.keys(y).forEach(function(e){H[e]=I[e]});var ue="Datadog Browser SDK:",E={debug:H.debug.bind(I,ue),log:H.log.bind(I,ue),info:H.info.bind(I,ue),warn:H.warn.bind(I,ue),error:H.error.bind(I,ue)},ot="https://docs.datadoghq.com",At="".concat(ot,"/real_user_monitoring/browser/troubleshooting"),Fe="More details:";function Nt(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return e.apply(void 0,n)}catch(o){E.error(t,o)}}}function Te(e){return e!==0&&Math.random()*100<=e}function Pn(e){return Bn(e)&&e>=0&&e<=100}function Bn(e){return typeof e=="number"}var ve=1e3,J=60*ve,Fn=60*J;function le(){return new Date().getTime()}function D(){return le()}function Le(){return performance.now()}function P(){return{relative:Le(),timeStamp:D()}}function Gn(){return{relative:0,timeStamp:Mt()}}function jn(e,t){return t-e}function Hn(e,t){return e+t}function zn(e){return e-Mt()}var He;function Mt(){return He===void 0&&(He=performance.timing.navigationStart),He}var k=1024,Ut=1024*k,qn=/[^\u0000-\u007F]/;function it(e){return qn.test(e)?window.TextEncoder!==void 0?new TextEncoder().encode(e).length:new Blob([e]).size:e.length}function V(e,t){return e.indexOf(t)!==-1}function at(e){if(Array.from)return Array.from(e);var t=[];if(e instanceof Set)e.forEach(function(r){return t.push(r)});else for(var n=0;n<e.length;n++)t.push(e[n]);return t}function Yn(e,t){for(var n=0;n<e.length;n+=1){var r=e[n];if(t(r,n))return r}}function Ie(e){return Object.keys(e).map(function(t){return e[t]})}function Kn(e){return Object.keys(e).map(function(t){return[t,e[t]]})}function st(e,t){return e.slice(0,t.length)===t}function Wn(e,t){return e.slice(-t.length)===t}function _(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach(function(r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}),e}function Jn(e){return _({},e)}function Dt(e,t){return Object.keys(e).some(function(n){return e[n]===t})}function ut(e){return Object.keys(e).length===0}function B(){if(typeof globalThis=="object")return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,typeof e!="object"&&(typeof self=="object"?e=self:typeof window=="object"?e=window:e={}),e}function re(e,t){var n=B(),r;return n.Zone&&typeof n.Zone.__symbol__=="function"&&(r=e[n.Zone.__symbol__(t)]),r||(r=e[t]),r}var Vn=function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},ke,Pt=!1;function Xn(e){ke=e}function $n(e){Pt=e}function Qn(e,t,n){var r=n.value;n.value=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=ke?b(r):r;return a.apply(this,o)}}function b(e){return function(){return fe(e,this,arguments)}}function fe(e,t,n){try{return e.apply(t,n)}catch(r){if(Ze(r),ke)try{ke(r)}catch(o){Ze(o)}}}function Ze(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Pt&&E.error.apply(E,Vn(["[MONITOR]"],e,!1))}function pe(e,t){return re(B(),"setTimeout")(b(e),t)}function Bt(e){re(B(),"clearTimeout")(e)}function ct(e,t){return re(B(),"setInterval")(b(e),t)}function Ft(e){re(B(),"clearInterval")(e)}var C=function(){function e(t){this.onFirstSubscribe=t,this.observers=[]}return e.prototype.subscribe=function(t){var n=this;return this.observers.push(t),this.observers.length===1&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe(this)||void 0),{unsubscribe:function(){n.observers=n.observers.filter(function(r){return t!==r}),!n.observers.length&&n.onLastUnsubscribe&&n.onLastUnsubscribe()}}},e.prototype.notify=function(t){this.observers.forEach(function(n){return n(t)})},e}();function Gt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new C(function(n){var r=e.map(function(o){return o.subscribe(function(i){return n.notify(i)})});return function(){return r.forEach(function(o){return o.unsubscribe()})}})}function jt(e,t,n){var r=!1,o,i;return{throttled:function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];if(r){o=a;return}e.apply(void 0,a),r=!0,i=pe(function(){o&&e.apply(void 0,o),r=!1,o=void 0},t)},cancel:function(){Bt(i),r=!1,o=void 0}}}function U(){}function X(e){return e?(parseInt(e,10)^Math.random()*16>>parseInt(e,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,X)}var Ae=/([\w-]+)\s*=\s*([^;]+)/g;function Zn(e,t){for(Ae.lastIndex=0;;){var n=Ae.exec(e);if(n){if(n[1]===t)return n[2]}else break}}function er(e){var t=new Map;for(Ae.lastIndex=0;;){var n=Ae.exec(e);if(n)t.set(n[1],n[2]);else break}return t}function tr(e,t,n){var r=e.charCodeAt(t-1),o=r>=55296&&r<=56319,i=o?t+1:t;return e.length<=i?e:"".concat(e.slice(0,i)).concat(n)}function nr(){return rr()===1}var be;function rr(){return be??(be=or())}function or(e){var t;e===void 0&&(e=window);var n=e.navigator.userAgent;return e.chrome||/HeadlessChrome/.test(n)?1:((t=e.navigator.vendor)===null||t===void 0?void 0:t.indexOf("Apple"))===0||/safari/i.test(n)&&!/chrome|android/i.test(n)?2:e.document.documentMode?0:3}function ge(e,t,n,r){var o=new Date;o.setTime(o.getTime()+n);var i="expires=".concat(o.toUTCString()),a=r&&r.crossSite?"none":"strict",u=r&&r.domain?";domain=".concat(r.domain):"",l=r&&r.secure?";secure":"",s=r&&r.partitioned?";partitioned":"";document.cookie="".concat(e,"=").concat(t,";").concat(i,";path=/;samesite=").concat(a).concat(u).concat(l).concat(s)}function lt(e){return Zn(document.cookie,e)}var ze;function Y(e){return ze||(ze=er(document.cookie)),ze.get(e)}function Ht(e,t){ge(e,"",0,t)}function ir(e){if(document.cookie===void 0||document.cookie===null)return!1;try{var t="dd_cookie_test_".concat(X()),n="test";ge(t,n,J,e);var r=lt(t)===n;return Ht(t,e),r}catch(o){return E.error(o),!1}}var qe;function ar(){if(qe===void 0){for(var e="dd_site_test_".concat(X()),t="test",n=window.location.hostname.split("."),r=n.pop();n.length&&!lt(e);)r="".concat(n.pop(),".").concat(r),ge(e,t,ve,{domain:r});Ht(e,{domain:r}),qe=r}return qe}var ae="_dd_s",ft=4*Fn,zt=15*J,qt=/^([a-zA-Z]+)=([a-z0-9-]+)$/,dt="&",sr="1";function z(){return{isExpired:sr}}function we(e){return ut(e)}function Yt(e){return!we(e)}function Ne(e){return e.isExpired!==void 0||!ur(e)}function ur(e){return(e.created===void 0||le()-Number(e.created)<ft)&&(e.expire===void 0||le()<Number(e.expire))}function Kt(e){e.expire=String(le()+zt)}function vt(e){return Kn(e).map(function(t){var n=t[0],r=t[1];return"".concat(n,"=").concat(r)}).join(dt)}function Wt(e){var t={};return cr(e)&&e.split(dt).forEach(function(n){var r=qt.exec(n);if(r!==null){var o=r[1],i=r[2];t[o]=i}}),t}function cr(e){return!!e&&(e.indexOf(dt)!==-1||qt.test(e))}var lr="_dd",fr="_dd_r",dr="_dd_l",vr="rum",pr="logs";function gr(e){var t=Y(ae);if(!t){var n=Y(lr),r=Y(fr),o=Y(dr),i={};n&&(i.id=n),o&&/^[01]$/.test(o)&&(i[pr]=o),r&&/^[012]$/.test(r)&&(i[vr]=r),Yt(i)&&(Kt(i),e.persistSession(i))}}function mr(e){var t=Er(e);return ir(t)?{type:"Cookie",cookieOptions:t}:void 0}function hr(e){var t={isLockEnabled:nr(),persistSession:br(e),retrieveSession:yr,expireSession:function(){return Sr(e)}};return gr(t),t}function br(e){return function(t){ge(ae,vt(t),zt,e)}}function Sr(e){ge(ae,vt(z()),ft,e)}function yr(){var e=lt(ae);return Wt(e)}function Er(e){var t={};return t.secure=!!e.useSecureSessionCookie||!!e.usePartitionedCrossSiteSessionCookie||!!e.useCrossSiteSessionCookie,t.crossSite=!!e.usePartitionedCrossSiteSessionCookie||!!e.useCrossSiteSessionCookie,t.partitioned=!!e.usePartitionedCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(t.domain=ar()),t}var Cr="_dd_test_";function _r(){try{var e=X(),t="".concat(Cr).concat(e);localStorage.setItem(t,e);var n=localStorage.getItem(t);return localStorage.removeItem(t),e===n?{type:"LocalStorage"}:void 0}catch{return}}function Tr(){return{isLockEnabled:!1,persistSession:Jt,retrieveSession:wr,expireSession:Or}}function Jt(e){localStorage.setItem(ae,vt(e))}function wr(){var e=localStorage.getItem(ae);return Wt(e)}function Or(){Jt(z())}var Rr=10,xr=100,Vt=[],Oe;function q(e,t,n){var r;n===void 0&&(n=0);var o=t.isLockEnabled,i=t.persistSession,a=t.expireSession,u=function(d){return i(_({},d,{lock:s}))},l=function(){var d=t.retrieveSession(),v=d.lock;return d.lock&&delete d.lock,{session:d,lock:v}};if(Oe||(Oe=e),e!==Oe){Vt.push(e);return}if(o&&n>=xr){yt(t);return}var s,c=l();if(o){if(c.lock){Se(e,t,n);return}if(s=X(),u(c.session),c=l(),c.lock!==s){Se(e,t,n);return}}var f=e.process(c.session);if(o&&(c=l(),c.lock!==s)){Se(e,t,n);return}if(f&&(Ne(f)?a():(Kt(f),o?u(f):i(f))),o&&!(f&&Ne(f))){if(c=l(),c.lock!==s){Se(e,t,n);return}i(c.session),f=c.session}(r=e.after)===null||r===void 0||r.call(e,f||c.session),yt(t)}function Se(e,t,n){pe(function(){q(e,t,n+1)},Rr)}function yt(e){Oe=void 0;var t=Vt.shift();t&&q(t,e)}var Et=ve;function Lr(e){var t=mr(e);return!t&&e.allowFallbackToLocalStorage&&(t=_r()),t}function Ir(e,t,n){var r=new C,o=new C,i=new C,a=e.type==="Cookie"?hr(e.cookieOptions):Tr(),u=a.expireSession,l=ct(m,Et),s;S();var c=jt(function(){q({process:function(h){if(!we(h)){var F=p(h);return T(F),F}},after:function(h){Yt(h)&&!L()&&xn(h),s=h}},a)},Et),f=c.throttled,d=c.cancel;function v(){q({process:function(h){return L()?p(h):void 0}},a)}function m(){q({process:function(h){return Ne(h)?z():void 0},after:p},a)}function p(h){return Ne(h)&&(h=z()),L()&&(ee(h)?Rn():(i.notify({previousState:s,newState:h}),s=h)),h}function S(){q({process:function(h){if(we(h))return z()},after:function(h){s=h}},a)}function T(h){if(we(h))return!1;var F=n(h[t]),In=F.trackingType,kn=F.isTracked;h[t]=In,delete h.isExpired,kn&&!h.id&&(h.id=X(),h.created=String(le()))}function L(){return s[t]!==void 0}function ee(h){return s.id!==h.id||s[t]!==h[t]}function Rn(){s=z(),o.notify()}function xn(h){s=h,r.notify()}function Ln(h){q({process:function(F){return _({},F,h)},after:p},a)}return{expandOrRenewSession:f,expandSession:v,getSession:function(){return s},renewObservable:r,expireObservable:o,sessionStateUpdateObservable:i,restartSession:S,expire:function(){d(),u(),p(z())},stop:function(){Ft(l)},updateSessionState:Ln}}var et={GRANTED:"granted",NOT_GRANTED:"not-granted"};function kr(e){var t=new C;return{tryToInit:function(n){e||(e=n)},update:function(n){e=n,t.notify()},isGranted:function(){return e===et.GRANTED},observable:t}}function $(e,t,n){if(typeof e!="object"||e===null)return JSON.stringify(e);var r=te(Object.prototype),o=te(Array.prototype),i=te(Object.getPrototypeOf(e)),a=te(e);try{return JSON.stringify(e,t,n)}catch{return"<error: unable to serialize object>"}finally{r(),o(),i(),a()}}function te(e){var t=e,n=t.toJSON;return n?(delete t.toJSON,function(){t.toJSON=n}):U}function pt(e){return Ar(e,location.href).href}function Ar(e,t){var n=Nr();if(n)try{return t!==void 0?new n(e,t):new n(e)}catch(a){throw new Error("Failed to construct URL: ".concat(String(a)," ").concat($({url:e,base:t})))}if(t===void 0&&!/:/.test(e))throw new Error("Invalid URL: '".concat(e,"'"));var r=document,o=r.createElement("a");if(t!==void 0){r=document.implementation.createHTMLDocument("");var i=r.createElement("base");i.href=t,r.head.appendChild(i),r.body.appendChild(o)}return o.href=e,o}var Ct=URL,ye;function Nr(){if(ye===void 0)try{var e=new Ct("http://test/path");ye=e.href==="http://test/path"}catch{ye=!1}return ye?Ct:void 0}var Mr="datad0g.com",Ur="dd0g-gov.com",ne="datadoghq.com",Dr="ddog-gov.com",Pr="pci.browser-intake-datadoghq.com",Br=["ddsource","ddtags"];function ce(e,t,n){var r=Fr(e,t);return{build:function(o,i){var a=jr(e,t,n,o,i);return r(a)},urlPrefix:r(""),trackType:t}}function Fr(e,t){var n="/api/v2/".concat(t),r=e.proxy;if(typeof r=="string"){var o=pt(r);return function(a){return"".concat(o,"?ddforward=").concat(encodeURIComponent("".concat(n,"?").concat(a)))}}if(typeof r=="function")return function(a){return r({path:n,parameters:a})};var i=Gr(t,e);return function(a){return"https://".concat(i).concat(n,"?").concat(a)}}function Gr(e,t){var n=t.site,r=n===void 0?ne:n,o=t.internalAnalyticsSubdomain;if(e==="logs"&&t.usePciIntake&&r===ne)return Pr;if(o&&r===ne)return"".concat(o,".").concat(ne);if(r===Ur)return"http-intake.logs.".concat(r);var i=r.split("."),a=i.pop();return"browser-intake-".concat(i.join("-"),".").concat(a)}function jr(e,t,n,r,o){var i=e.clientToken,a=e.internalAnalyticsSubdomain,u=o.retry,l=o.encoding,s=["sdk_version:".concat("5.32.0"),"api:".concat(r)].concat(n);u&&s.push("retry_count:".concat(u.count),"retry_after:".concat(u.lastFailureStatus));var c=["ddsource=browser","ddtags=".concat(encodeURIComponent(s.join(","))),"dd-api-key=".concat(i),"dd-evp-origin-version=".concat(encodeURIComponent("5.32.0")),"dd-evp-origin=browser","dd-request-id=".concat(X())];return l&&c.push("dd-evp-encoding=".concat(l)),t==="rum"&&c.push("batch_time=".concat(D())),a&&c.reverse(),c.join("&")}var Hr=200;function zr(e){var t=e.env,n=e.service,r=e.version,o=e.datacenter,i=[];return t&&i.push(Ee("env",t)),n&&i.push(Ee("service",n)),r&&i.push(Ee("version",r)),o&&i.push(Ee("datacenter",o)),i}function Ee(e,t){var n=Hr-e.length-1;(t.length>n||qr(t))&&E.warn("".concat(e," value doesn't meet tag requirements and will be sanitized. ").concat(Fe," ").concat(ot,"/getting_started/tagging/#defining-tags"));var r=t.replace(/,/g,"_");return"".concat(e,":").concat(r)}function qr(e){return Yr()?new RegExp("[^\\p{Ll}\\p{Lo}0-9_:./-]","u").test(e):!1}function Yr(){try{return new RegExp("[\\p{Ll}]","u"),!0}catch{return!1}}function Kr(e){var t=e.site||ne,n=zr(e),r=Wr(e,n),o=Jr(e,n);return _({replica:o,site:t},r)}function Wr(e,t){return{logsEndpointBuilder:ce(e,"logs",t),rumEndpointBuilder:ce(e,"rum",t),sessionReplayEndpointBuilder:ce(e,"replay",t)}}function Jr(e,t){if(e.replica){var n=_({},e,{site:ne,clientToken:e.replica.clientToken}),r={logsEndpointBuilder:ce(n,"logs",t),rumEndpointBuilder:ce(n,"rum",t)};return _({applicationId:e.replica.applicationId},r)}}function Vr(e){return Br.every(function(t){return V(e,t)})}function Ye(e,t){return e!=null&&typeof e!="string"?(E.error("".concat(t," must be defined as a string")),!1):!0}function Xr(e){return e&&typeof e=="string"&&!/(datadog|ddog|datad0g|dd0g)/.test(e)?(E.error("Site should be a valid Datadog site. ".concat(Fe," ").concat(ot,"/getting_started/site/.")),!1):!0}function Ce(e,t){return e!==void 0&&!Pn(e)?(E.error("".concat(t," Sample Rate should be a number between 0 and 100")),!1):!0}function $r(e){var t,n,r,o,i;if(!e||!e.clientToken){E.error("Client Token is not configured, we will not send any data.");return}if(!(!Xr(e.site)||!Ce(e.sessionSampleRate,"Session")||!Ce(e.telemetrySampleRate,"Telemetry")||!Ce(e.telemetryConfigurationSampleRate,"Telemetry Configuration")||!Ce(e.telemetryUsageSampleRate,"Telemetry Usage")||!Ye(e.version,"Version")||!Ye(e.env,"Env")||!Ye(e.service,"Service"))){if(e.trackingConsent!==void 0&&!Dt(et,e.trackingConsent)){E.error('Tracking Consent should be either "granted" or "not-granted"');return}return _({beforeSend:e.beforeSend&&Nt(e.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:Lr(e),sessionSampleRate:(t=e.sessionSampleRate)!==null&&t!==void 0?t:100,telemetrySampleRate:(n=e.telemetrySampleRate)!==null&&n!==void 0?n:20,telemetryConfigurationSampleRate:(r=e.telemetryConfigurationSampleRate)!==null&&r!==void 0?r:5,telemetryUsageSampleRate:(o=e.telemetryUsageSampleRate)!==null&&o!==void 0?o:5,service:e.service||void 0,silentMultipleInit:!!e.silentMultipleInit,allowUntrustedEvents:!!e.allowUntrustedEvents,trackingConsent:(i=e.trackingConsent)!==null&&i!==void 0?i:et.GRANTED,storeContextsAcrossPages:!!e.storeContextsAcrossPages,batchBytesLimit:16*k,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:30*ve,batchMessagesLimit:50,messageBytesLimit:256*k},Kr(e))}}function Qr(e){return{session_sample_rate:e.sessionSampleRate,telemetry_sample_rate:e.telemetrySampleRate,telemetry_configuration_sample_rate:e.telemetryConfigurationSampleRate,telemetry_usage_sample_rate:e.telemetryUsageSampleRate,use_before_send:!!e.beforeSend,use_cross_site_session_cookie:e.useCrossSiteSessionCookie,use_partitioned_cross_site_session_cookie:e.usePartitionedCrossSiteSessionCookie,use_secure_session_cookie:e.useSecureSessionCookie,use_proxy:!!e.proxy,silent_multiple_init:e.silentMultipleInit,track_session_across_subdomains:e.trackSessionAcrossSubdomains,allow_fallback_to_local_storage:!!e.allowFallbackToLocalStorage,store_contexts_across_pages:!!e.storeContextsAcrossPages,allow_untrusted_events:!!e.allowUntrustedEvents,tracking_consent:e.trackingConsent}}var tt;(function(e){e.WRITABLE_RESOURCE_GRAPHQL="writable_resource_graphql",e.REMOTE_CONFIGURATION="remote_configuration",e.LONG_ANIMATION_FRAME="long_animation_frame",e.ACTION_NAME_MASKING="action_name_masking"})(tt||(tt={}));var Xt=new Set;function Zr(e){Array.isArray(e)&&eo(e.filter(function(t){return Dt(tt,t)}))}function eo(e){e.forEach(function(t){Xt.add(t)})}function to(){return Xt}var me="?";function N(e){var t=[],n=Ke(e,"stack"),r=String(e);return n&&st(n,r)&&(n=n.slice(r.length)),n&&n.split(`
`).forEach(function(o){var i=oo(o)||ao(o)||uo(o)||fo(o);i&&(!i.func&&i.line&&(i.func=me),t.push(i))}),{message:Ke(e,"message"),name:Ke(e,"name"),stack:t}}var $t="((?:file|https?|blob|chrome-extension|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",oe="(?::(\\d+))",no=new RegExp("^\\s*at (.*?) ?\\(".concat($t).concat(oe,"?").concat(oe,"?\\)?\\s*$"),"i"),ro=new RegExp("\\((\\S*)".concat(oe).concat(oe,"\\)"));function oo(e){var t=no.exec(e);if(t){var n=t[2]&&t[2].indexOf("native")===0,r=t[2]&&t[2].indexOf("eval")===0,o=ro.exec(t[2]);return r&&o&&(t[2]=o[1],t[3]=o[2],t[4]=o[3]),{args:n?[t[2]]:[],column:t[4]?+t[4]:void 0,func:t[1]||me,line:t[3]?+t[3]:void 0,url:n?void 0:t[2]}}}var io=new RegExp("^\\s*at ?".concat($t).concat(oe,"?").concat(oe,"??\\s*$"),"i");function ao(e){var t=io.exec(e);if(t)return{args:[],column:t[3]?+t[3]:void 0,func:me,line:t[2]?+t[2]:void 0,url:t[1]}}var so=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function uo(e){var t=so.exec(e);if(t)return{args:[],column:t[4]?+t[4]:void 0,func:t[1]||me,line:+t[3],url:t[2]}}var co=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,lo=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function fo(e){var t=co.exec(e);if(t){var n=t[3]&&t[3].indexOf(" > eval")>-1,r=lo.exec(t[3]);return n&&r&&(t[3]=r[1],t[4]=r[2],t[5]=void 0),{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:void 0,func:t[1]||me,line:t[4]?+t[4]:void 0,url:t[3]}}}function Ke(e,t){if(!(typeof e!="object"||!e||!(t in e))){var n=e[t];return typeof n=="string"?n:void 0}}function vo(e,t,n,r){var o=[{url:t,column:r,line:n}],i=go(e),a=i.name,u=i.message;return{name:a,message:u,stack:o}}var po=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function go(e){var t,n,r;return{}.toString.call(e)==="[object String]"&&(t=po.exec(e),n=t[1],r=t[2]),{name:n,message:r}}function Ge(){var e=2,t=new Error,n;if(!t.stack)try{throw t}catch{}return fe(function(){var r=N(t);r.stack=r.stack.slice(e),n=Q(r)}),n}function Q(e){var t=Qt(e);return e.stack.forEach(function(n){var r=n.func==="?"?"<anonymous>":n.func,o=n.args&&n.args.length>0?"(".concat(n.args.join(", "),")"):"",i=n.line?":".concat(n.line):"",a=n.line&&n.column?":".concat(n.column):"";t+=`
  at `.concat(r).concat(o," @ ").concat(n.url).concat(i).concat(a)}),t}function Qt(e){return"".concat(e.name||"Error",": ").concat(e.message)}function K(e,t,n,r){var o=r===void 0?{}:r,i=o.computeHandlingStack,a=e[t];if(typeof a!="function")if(t in e&&st(t,"on"))a=U;else return{stop:U};var u=!1,l=function(){if(u)return a.apply(this,arguments);var s=at(arguments),c;fe(n,null,[{target:this,parameters:s,onPostCall:function(d){c=d},handlingStack:i?Ge():void 0}]);var f=a.apply(this,s);return c&&fe(c,null,[f]),f};return e[t]=l,{stop:function(){u=!0,e[t]===l&&(e[t]=a)}}}var mo=220*k,ho="$",bo=3;function A(e,t){t===void 0&&(t=mo);var n=te(Object.prototype),r=te(Array.prototype),o=[],i=new WeakMap,a=We(e,ho,void 0,o,i),u=JSON.stringify(a),l=u?u.length:0;if(l>t){Je(t,"discarded",e);return}for(;o.length>0&&l<t;){var s=o.shift(),c=0;if(Array.isArray(s.source))for(var f=0;f<s.source.length;f++){var d=We(s.source[f],s.path,f,o,i);if(d!==void 0?l+=JSON.stringify(d).length:l+=4,l+=c,c=1,l>t){Je(t,"truncated",e);break}s.target[f]=d}else for(var f in s.source)if(Object.prototype.hasOwnProperty.call(s.source,f)){var d=We(s.source[f],s.path,f,o,i);if(d!==void 0&&(l+=JSON.stringify(d).length+c+f.length+bo,c=1),l>t){Je(t,"truncated",e);break}s.target[f]=d}}return n(),r(),a}function We(e,t,n,r,o){var i=Eo(e);if(!i||typeof i!="object")return So(i);var a=yo(i);if(a!=="[Object]"&&a!=="[Array]"&&a!=="[Error]")return a;var u=e;if(o.has(u))return"[Reference seen at ".concat(o.get(u),"]");var l=n!==void 0?"".concat(t,".").concat(n):t,s=Array.isArray(i)?[]:{};return o.set(u,l),r.push({source:i,target:s,path:l}),s}function So(e){return typeof e=="bigint"?"[BigInt] ".concat(e.toString()):typeof e=="function"?"[Function] ".concat(e.name||"unknown"):typeof e=="symbol"?"[Symbol] ".concat(e.description||e.toString()):e}function yo(e){try{if(e instanceof Event)return{isTrusted:e.isTrusted};var t=Object.prototype.toString.call(e),n=t.match(/\[object (.*)\]/);if(n&&n[1])return"[".concat(n[1],"]")}catch{}return"[Unserializable]"}function Eo(e){var t=e;if(t&&typeof t.toJSON=="function")try{return t.toJSON()}catch{}return e}function Je(e,t,n){E.warn("The data provided has been ".concat(t," as it is over the limit of ").concat(e," characters:"),n)}var Zt="No stack, consider using an instance of Error";function en(e){var t=e.stackTrace,n=e.originalError,r=e.handlingStack,o=e.startClocks,i=e.nonErrorPrefix,a=e.source,u=e.handling,l=n instanceof Error,s=Co(t,l,i,n),c=_o(l,t)?Q(t):Zt,f=l?nn(n,a):void 0,d=t?t.name:void 0,v=tn(n);return{startClocks:o,source:a,handling:u,handlingStack:r,originalError:n,type:d,message:s,stack:c,causes:f,fingerprint:v}}function Co(e,t,n,r){return e?.message&&e?.name?e.message:t?"Empty message":"".concat(n," ").concat($(A(r)))}function _o(e,t){return t===void 0?!1:e?!0:t.stack.length>0&&(t.stack.length>1||t.stack[0].url!==void 0)}function tn(e){return e instanceof Error&&"dd_fingerprint"in e?String(e.dd_fingerprint):void 0}function To(e){var t;return(t=/@ (.+)/.exec(e))===null||t===void 0?void 0:t[1]}function nn(e,t){for(var n=e,r=[];n?.cause instanceof Error&&r.length<10;){var o=N(n.cause);r.push({message:n.cause.message,source:t,type:o?.name,stack:o&&Q(o)}),n=n.cause}return r.length?r:void 0}var w={AGENT:"agent",CONSOLE:"console",CUSTOM:"custom",LOGGER:"logger",NETWORK:"network",SOURCE:"source",REPORT:"report"};function wo(e){var t=function(o,i){var a=en({stackTrace:o,originalError:i,startClocks:P(),nonErrorPrefix:"Uncaught",source:w.SOURCE,handling:"unhandled"});e.notify(a)},n=Oo(t).stop,r=Ro(t).stop;return{stop:function(){n(),r()}}}function Oo(e){return K(window,"onerror",function(t){var n=t.parameters,r=n[0],o=n[1],i=n[2],a=n[3],u=n[4],l;u instanceof Error?l=N(u):l=vo(r,o,i,a),e(l,u??r)})}function Ro(e){return K(window,"onunhandledrejection",function(t){var n=t.parameters[0],r=n.reason||"Empty reason",o=N(r);e(o,r)})}function xo(e){var t=_({version:"5.32.0",onReady:function(n){n()}},e);return Object.defineProperty(t,"_setDebug",{get:function(){return $n},enumerable:!1}),t}function Lo(e,t,n){var r=e[t];r&&!r.q&&r.version&&E.warn("SDK is loaded more than once. This is unsupported and might have unexpected behavior."),e[t]=n,r&&r.q&&r.q.forEach(function(o){return Nt(o,"onReady callback threw an error:")()})}function rn(e,t){t.silentMultipleInit||E.error("".concat(e," is already initialized."))}function Z(e,t,n,r,o){return gt(e,t,[n],r,o)}function gt(e,t,n,r,o){var i=o===void 0?{}:o,a=i.once,u=i.capture,l=i.passive,s=b(function(m){!m.isTrusted&&!m.__ddIsTrusted&&!e.allowUntrustedEvents||(a&&v(),r(m))}),c=l?{capture:u,passive:l}:u,f=window.EventTarget&&t instanceof EventTarget?window.EventTarget.prototype:t,d=re(f,"addEventListener");n.forEach(function(m){return d.call(t,m,s,c)});function v(){var m=re(f,"removeEventListener");n.forEach(function(p){return m.call(t,p,s,c)})}return{stop:v}}var Me={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function Io(e,t){var n=[];V(t,Me.cspViolation)&&n.push(Ao(e));var r=t.filter(function(o){return o!==Me.cspViolation});return r.length&&n.push(ko(r)),Gt.apply(void 0,n)}function ko(e){return new C(function(t){if(window.ReportingObserver){var n=b(function(o,i){return o.forEach(function(a){return t.notify(No(a))})}),r=new window.ReportingObserver(n,{types:e,buffered:!0});return r.observe(),function(){r.disconnect()}}})}function Ao(e){return new C(function(t){var n=Z(e,document,"securitypolicyviolation",function(r){t.notify(Mo(r))}).stop;return n})}function No(e){var t=e.type,n=e.body;return on({type:n.id,message:"".concat(t,": ").concat(n.message),originalError:e,stack:an(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)})}function Mo(e){var t="'".concat(e.blockedURI,"' blocked by '").concat(e.effectiveDirective,"' directive");return on({type:e.effectiveDirective,message:"".concat(Me.cspViolation,": ").concat(t),originalError:e,csp:{disposition:e.disposition},stack:an(e.effectiveDirective,e.originalPolicy?"".concat(t,' of the policy "').concat(tr(e.originalPolicy,100,"..."),'"'):"no policy",e.sourceFile,e.lineNumber,e.columnNumber)})}function on(e){return _({startClocks:P(),source:w.REPORT,handling:"unhandled"},e)}function an(e,t,n,r,o){return n?Q({name:e,message:t,stack:[{func:"?",url:n,line:r??void 0,column:o??void 0}]}):void 0}function sn(e,t){var n=window.__ddBrowserSdkExtensionCallback;n&&n({type:e,payload:t})}function mt(e){return e===null?"null":Array.isArray(e)?"array":typeof e}function Ue(e,t,n){if(n===void 0&&(n=Uo()),t===void 0)return e;if(typeof t!="object"||t===null)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){var r=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,r)}if(!n.hasAlreadyBeenSeen(t)){if(Array.isArray(t)){for(var o=Array.isArray(e)?e:[],i=0;i<t.length;++i)o[i]=Ue(o[i],t[i],n);return o}var a=mt(e)==="object"?e:{};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(a[u]=Ue(a[u],t[u],n));return a}}function un(e){return Ue(void 0,e)}function ie(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n,r=0,o=e;r<o.length;r++){var i=o[r];i!=null&&(n=Ue(n,i))}return n}function Uo(){if(typeof WeakSet<"u"){var e=new WeakSet;return{hasAlreadyBeenSeen:function(n){var r=e.has(n);return r||e.add(n),r}}}var t=[];return{hasAlreadyBeenSeen:function(n){var r=t.indexOf(n)>=0;return r||t.push(n),r}}}function Do(){var e,t=window.navigator;return{status:t.onLine?"connected":"not_connected",interfaces:t.connection&&t.connection.type?[t.connection.type]:void 0,effective_type:(e=t.connection)===null||e===void 0?void 0:e.effectiveType}}function Po(e){var t=new Set;return e.forEach(function(n){return t.add(n)}),at(t)}function cn(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}var Bo=500;function ln(){var e=[],t=function(o){var i=e.push(o);i>Bo&&e.splice(0,1)},n=function(o){cn(e,o)},r=function(o){e.forEach(function(i){return i(o)}),e.length=0};return{add:t,remove:n,drain:r}}var W={log:"log",configuration:"configuration",usage:"usage"},Fo=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],Go=[Dr],fn=ln(),se=function(e){fn.add(function(){return se(e)})};function jo(e,t){var n,r,o=new C,i=new Set,a=!V(Go,t.site)&&Te(t.telemetrySampleRate),u=(n={},n[W.log]=a,n[W.configuration]=a&&Te(t.telemetryConfigurationSampleRate),n[W.usage]=a&&Te(t.telemetryUsageSampleRate),n),l=Ho();se=function(c){var f=$(c);if(u[c.type]&&i.size<t.maxTelemetryEventsPerPage&&!i.has(f)){var d=s(e,c,l);o.notify(d),sn("telemetry",d),i.add(f)}},Xn(vn);function s(c,f,d){return ie({type:"telemetry",date:D(),service:c,version:"5.32.0",source:"browser",_dd:{format_version:2},telemetry:ie(f,{runtime_env:d,connectivity:Do(),sdk_setup:"npm"}),experimental_features:at(to())},r!==void 0?r():{})}return{setContextProvider:function(c){r=c},observable:o,enabled:a}}function Ho(){return{is_local_file:window.location.protocol==="file:",is_worker:"WorkerGlobalScope"in self}}function zo(){fn.drain()}function qo(e){return e.site===Mr}function dn(e,t){Ze(y.debug,e,t),se(_({type:W.log,message:e,status:"debug"},t))}function vn(e,t){se(_({type:W.log,status:"error"},Wo(e),t))}function Yo(e){se({type:W.configuration,configuration:e})}function Ko(e){se({type:W.usage,usage:e})}function Wo(e){if(e instanceof Error){var t=N(e);return{error:{kind:t.name,stack:Q(Jo(t))},message:t.message}}return{error:{stack:Zt},message:"".concat("Uncaught"," ").concat($(e))}}function Jo(e){return e.stack=e.stack.filter(function(t){return!t.url||Fo.some(function(n){return st(t.url,n)})}),e}var _e=1/0,Vo=J;function Xo(e){var t=e.expireDelay,n=e.maxEntries,r=[],o=ct(function(){return i()},Vo);function i(){for(var d=Le()-t;r.length>0&&r[r.length-1].endTime<d;)r.pop()}function a(d,v){var m={value:d,startTime:v,endTime:_e,remove:function(){cn(r,m)},close:function(p){m.endTime=p}};return n&&r.length>=n&&r.pop(),r.unshift(m),m}function u(d,v){d===void 0&&(d=_e),v===void 0&&(v={returnInactive:!1});for(var m=0,p=r;m<p.length;m++){var S=p[m];if(S.startTime<=d){if(v.returnInactive||d<=S.endTime)return S.value;break}}}function l(d){var v=r[0];v&&v.endTime===_e&&v.close(d)}function s(d,v){d===void 0&&(d=_e),v===void 0&&(v=0);var m=Hn(d,v);return r.filter(function(p){return p.startTime<=m&&d<=p.endTime}).map(function(p){return p.value})}function c(){r=[]}function f(){Ft(o)}return{add:a,find:u,closeActive:l,findAll:s,reset:c,stop:f}}var $o=J,Qo=ft;function Zo(e,t,n,r){var o=new C,i=new C,a=Ir(e.sessionStoreStrategyType,t,n),u=Xo({expireDelay:Qo});a.renewObservable.subscribe(function(){u.add(l(),Le()),o.notify()}),a.expireObservable.subscribe(function(){i.notify(),u.closeActive(Le())}),a.expandOrRenewSession(),u.add(l(),Gn().relative),r.observable.subscribe(function(){r.isGranted()?a.expandOrRenewSession():a.expire()}),ei(e,function(){r.isGranted()&&a.expandOrRenewSession()}),ti(e,function(){return a.expandSession()}),ni(e,function(){return a.restartSession()});function l(){return{id:a.getSession().id,trackingType:a.getSession()[t],isReplayForced:!!a.getSession().forcedReplay}}return{findSession:function(s,c){return u.find(s,c)},renewObservable:o,expireObservable:i,sessionStateUpdateObservable:a.sessionStateUpdateObservable,expire:a.expire,updateSessionState:a.updateSessionState}}function ei(e,t){gt(e,window,["click","touchstart","keydown","scroll"],t,{capture:!0,passive:!0}).stop}function ti(e,t){var n=function(){document.visibilityState==="visible"&&t()};Z(e,document,"visibilitychange",n).stop,ct(n,$o)}function ni(e,t){Z(e,window,"resume",t,{capture:!0}).stop}function pn(e){return e>=500}function ri(e){try{return e.clone()}catch{return}}var oi=80*k,ii=32,gn=3*Ut,ai=J,mn=ve;function hn(e,t,n,r,o){t.transportStatus===0&&t.queuedPayloads.size()===0&&t.bandwidthMonitor.canHandle(e)?Sn(e,t,n,{onSuccess:function(){return yn(0,t,n,r,o)},onFailure:function(){t.queuedPayloads.enqueue(e),bn(t,n,r,o)}}):t.queuedPayloads.enqueue(e)}function bn(e,t,n,r){e.transportStatus===2&&pe(function(){var o=e.queuedPayloads.first();Sn(o,e,t,{onSuccess:function(){e.queuedPayloads.dequeue(),e.currentBackoffTime=mn,yn(1,e,t,n,r)},onFailure:function(){e.currentBackoffTime=Math.min(ai,e.currentBackoffTime*2),bn(e,t,n,r)}})},e.currentBackoffTime)}function Sn(e,t,n,r){var o=r.onSuccess,i=r.onFailure;t.bandwidthMonitor.add(e),n(e,function(a){t.bandwidthMonitor.remove(e),si(a)?(t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?1:2,e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:a.status},i()):(t.transportStatus=0,o())})}function yn(e,t,n,r,o){e===0&&t.queuedPayloads.isFull()&&!t.queueFullReported&&(o({message:"Reached max ".concat(r," events size queued for upload: ").concat(gn/Ut,"MiB"),source:w.AGENT,startClocks:P()}),t.queueFullReported=!0);var i=t.queuedPayloads;for(t.queuedPayloads=En();i.size()>0;)hn(i.dequeue(),t,n,r,o)}function si(e){return e.type!=="opaque"&&(e.status===0&&!navigator.onLine||e.status===408||e.status===429||pn(e.status))}function ui(){return{transportStatus:0,currentBackoffTime:mn,bandwidthMonitor:ci(),queuedPayloads:En(),queueFullReported:!1}}function En(){var e=[];return{bytesCount:0,enqueue:function(t){this.isFull()||(e.push(t),this.bytesCount+=t.bytesCount)},first:function(){return e[0]},dequeue:function(){var t=e.shift();return t&&(this.bytesCount-=t.bytesCount),t},size:function(){return e.length},isFull:function(){return this.bytesCount>=gn}}}function ci(){return{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(e){return this.ongoingRequestCount===0||this.ongoingByteCount+e.bytesCount<=oi&&this.ongoingRequestCount<ii},add:function(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove:function(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount}}}function li(e,t,n){var r=ui(),o=function(i,a){return vi(e,t,i,a)};return{send:function(i){hn(i,r,o,e.trackType,n)},sendOnExit:function(i){fi(e,t,i)}}}function fi(e,t,n){var r=!!navigator.sendBeacon&&n.bytesCount<t;if(r)try{var o=e.build("beacon",n),i=navigator.sendBeacon(o,n.data);if(i)return}catch(u){di(u)}var a=e.build("xhr",n);nt(a,n.data)}var _t=!1;function di(e){_t||(_t=!0,vn(e))}function vi(e,t,n,r){var o=pi()&&n.bytesCount<t;if(o){var i=e.build("fetch",n);fetch(i,{method:"POST",body:n.data,keepalive:!0,mode:"cors"}).then(b(function(u){return r?.({status:u.status,type:u.type})}),b(function(){var u=e.build("xhr",n);nt(u,n.data,r)}))}else{var a=e.build("xhr",n);nt(a,n.data,r)}}function pi(){try{return window.Request&&"keepalive"in new Request("http://a")}catch{return!1}}function nt(e,t,n){var r=new XMLHttpRequest;r.open("POST",e,!0),t instanceof Blob&&r.setRequestHeader("Content-Type",t.type),Z({allowUntrustedEvents:!0},r,"loadend",function(){n?.({status:r.status})},{once:!0}),r.send(t)}function ht(){var e=gi();if(e)return{getCapabilities:function(){var t;return JSON.parse(((t=e.getCapabilities)===null||t===void 0?void 0:t.call(e))||"[]")},getPrivacyLevel:function(){var t;return(t=e.getPrivacyLevel)===null||t===void 0?void 0:t.call(e)},getAllowedWebViewHosts:function(){return JSON.parse(e.getAllowedWebViewHosts())},send:function(t,n,r){var o=r?{id:r}:void 0;e.send(JSON.stringify({eventType:t,event:n,view:o}))}}}function De(e){var t;e===void 0&&(e=(t=B().location)===null||t===void 0?void 0:t.hostname);var n=ht();return!!n&&n.getAllowedWebViewHosts().some(function(r){return e===r||Wn(e,".".concat(r))})}function gi(){return B().DatadogEventBridge}var Re={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function mi(e){return new C(function(t){var n=gt(e,window,["visibilitychange","freeze"],function(o){o.type==="visibilitychange"&&document.visibilityState==="hidden"?t.notify({reason:Re.HIDDEN}):o.type==="freeze"&&t.notify({reason:Re.FROZEN})},{capture:!0}).stop,r=Z(e,window,"beforeunload",function(){t.notify({reason:Re.UNLOADING})}).stop;return function(){n(),r()}})}function hi(e){return V(Ie(Re),e)}function bi(e){var t=e.encoder,n=e.request,r=e.flushController,o=e.messageBytesLimit,i={},a=r.flushObservable.subscribe(function(d){return f(d)});function u(d,v,m){r.notifyBeforeAddMessage(v),m!==void 0?(i[m]=d,r.notifyAfterAddMessage()):t.write(t.isEmpty?d:`
`.concat(d),function(p){r.notifyAfterAddMessage(p-v)})}function l(d){return d!==void 0&&i[d]!==void 0}function s(d){var v=i[d];delete i[d];var m=t.estimateEncodedBytesCount(v);r.notifyAfterRemoveMessage(m)}function c(d,v){var m=$(d),p=t.estimateEncodedBytesCount(m);if(p>=o){E.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(o,"KB. ").concat(Fe," ").concat(At,"/#technical-limitations"));return}l(v)&&s(v),u(m,p,v)}function f(d){var v=Ie(i).join(`
`);i={};var m=hi(d.reason),p=m?n.sendOnExit:n.send;if(m&&t.isAsync){var S=t.finishSync();S.outputBytesCount&&p(Tt(S));var T=[S.pendingData,v].filter(Boolean).join(`
`);T&&p({data:T,bytesCount:it(T)})}else v&&t.write(t.isEmpty?v:`
`.concat(v)),t.finish(function(L){p(Tt(L))})}return{flushController:r,add:c,upsert:c,stop:a.unsubscribe}}function Tt(e){var t;return typeof e.output=="string"?t=e.output:t=new Blob([e.output],{type:"text/plain"}),{data:t,bytesCount:e.outputBytesCount,encoding:e.encoding}}function Si(e){var t=e.messagesLimit,n=e.bytesLimit,r=e.durationLimit,o=e.pageExitObservable,i=e.sessionExpireObservable,a=o.subscribe(function(p){return f(p.reason)}),u=i.subscribe(function(){return f("session_expire")}),l=new C(function(){return function(){a.unsubscribe(),u.unsubscribe()}}),s=0,c=0;function f(p){if(c!==0){var S=c,T=s;c=0,s=0,m(),l.notify({reason:p,messagesCount:S,bytesCount:T})}}var d;function v(){d===void 0&&(d=pe(function(){f("duration_limit")},r))}function m(){Bt(d),d=void 0}return{flushObservable:l,get messagesCount(){return c},notifyBeforeAddMessage:function(p){s+p>=n&&f("bytes_limit"),c+=1,s+=p,v()},notifyAfterAddMessage:function(p){p===void 0&&(p=0),s+=p,c>=t?f("messages_limit"):s>=n&&f("bytes_limit")},notifyAfterRemoveMessage:function(p){s-=p,c-=1,c===0&&m()}}}function Cn(e,t,n,r,o,i,a){a===void 0&&(a=bi);var u=s(e,t),l=n&&s(e,n);function s(c,f){var d=f.endpoint,v=f.encoder;return a({encoder:v,request:li(d,c.batchBytesLimit,r),flushController:Si({messagesLimit:c.batchMessagesLimit,bytesLimit:c.batchBytesLimit,durationLimit:c.flushTimeout,pageExitObservable:o,sessionExpireObservable:i}),messageBytesLimit:c.messageBytesLimit})}return{flushObservable:u.flushController.flushObservable,add:function(c,f){f===void 0&&(f=!0),u.add(c),l&&f&&l.add(n.transformMessage?n.transformMessage(c):c)},upsert:function(c,f){u.upsert(c,f),l&&l.upsert(n.transformMessage?n.transformMessage(c):c,f)},stop:function(){u.stop(),l&&l.stop()}}}function Pe(){var e="",t=0;return{isAsync:!1,get isEmpty(){return!e},write:function(n,r){var o=it(n);t+=o,e+=n,r&&r(o)},finish:function(n){n(this.finishSync())},finishSync:function(){var n={output:e,outputBytesCount:t,rawBytesCount:t,pendingData:""};return e="",t=0,n},estimateEncodedBytesCount:function(n){return n.length}}}var yi=function(){function e(){this.callbacks={}}return e.prototype.notify=function(t,n){var r=this.callbacks[t];r&&r.forEach(function(o){return o(n)})},e.prototype.subscribe=function(t,n){var r=this;return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(n),{unsubscribe:function(){r.callbacks[t]=r.callbacks[t].filter(function(o){return n!==o})}}},e}();function Ei(e,t,n){var r=0,o=!1;return{isLimitReached:function(){if(r===0&&pe(function(){r=0},J),r+=1,r<=t||o)return o=!1,!1;if(r===t+1){o=!0;try{n({message:"Reached max number of ".concat(e,"s by minute: ").concat(t),source:w.AGENT,startClocks:P()})}finally{o=!1}}return!0}}}var Ve,bt=new WeakMap;function Ci(e){return Ve||(Ve=_i(e)),Ve}function _i(e){return new C(function(t){var n=K(XMLHttpRequest.prototype,"open",Ti).stop,r=K(XMLHttpRequest.prototype,"send",function(i){wi(i,e,t)},{computeHandlingStack:!0}).stop,o=K(XMLHttpRequest.prototype,"abort",Oi).stop;return function(){n(),r(),o()}})}function Ti(e){var t=e.target,n=e.parameters,r=n[0],o=n[1];bt.set(t,{state:"open",method:String(r).toUpperCase(),url:pt(String(o))})}function wi(e,t,n){var r=e.target,o=e.handlingStack,i=bt.get(r);if(i){var a=i;a.state="start",a.startClocks=P(),a.isAborted=!1,a.xhr=r,a.handlingStack=o;var u=!1,l=K(r,"onreadystatechange",function(){r.readyState===XMLHttpRequest.DONE&&s()}).stop,s=function(){if(c(),l(),!u){u=!0;var f=i;f.state="complete",f.duration=jn(a.startClocks.timeStamp,D()),f.status=r.status,n.notify(Jn(f))}},c=Z(t,r,"loadend",s).stop;n.notify(a)}}function Oi(e){var t=e.target,n=bt.get(t);n&&(n.isAborted=!0)}var Xe;function _n(){return Xe||(Xe=Ri()),Xe}function Ri(){return new C(function(e){if(window.fetch){var t=K(window,"fetch",function(n){return xi(n,e)},{computeHandlingStack:!0}).stop;return t}})}function xi(e,t){var n=e.parameters,r=e.onPostCall,o=e.handlingStack,i=n[0],a=n[1],u=a&&a.method;u===void 0&&i instanceof Request&&(u=i.method);var l=u!==void 0?String(u).toUpperCase():"GET",s=i instanceof Request?i.url:pt(String(i)),c=P(),f={state:"start",init:a,input:i,method:l,startClocks:c,url:s,handlingStack:o};t.notify(f),n[0]=f.input,n[1]=f.init,r(function(d){return Li(t,d,f)})}function Li(e,t,n){var r=n;function o(i){r.state="resolve",_(r,i),e.notify(r)}t.then(b(function(i){o({response:i,responseType:i.type,status:i.status,isAborted:!1})}),b(function(i){var a,u;o({status:0,isAborted:((u=(a=r.init)===null||a===void 0?void 0:a.signal)===null||u===void 0?void 0:u.aborted)||i instanceof DOMException&&i.code===DOMException.ABORT_ERR,error:i})}))}var $e={};function Ii(e){var t=e.map(function(n){return $e[n]||($e[n]=ki(n)),$e[n]});return Gt.apply(void 0,t)}function ki(e){return new C(function(t){var n=I[e];return I[e]=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];n.apply(console,r);var i=Ge();fe(function(){t.notify(Ai(r,e,i))})},function(){I[e]=n}})}function Ai(e,t,n){var r=e.map(function(a){return Ni(a)}).join(" "),o;if(t===y.error){var i=Yn(e,function(a){return a instanceof Error});o={stack:i?Q(N(i)):void 0,fingerprint:tn(i),causes:i?nn(i,"console"):void 0,startClocks:P(),message:r,source:w.CONSOLE,handling:"handled",handlingStack:n}}return{api:t,message:r,error:o,handlingStack:n}}function Ni(e){return typeof e=="string"?A(e):e instanceof Error?Qt(N(e)):$(A(e),void 0,2)}function rt(e){var t={},n=new C,r={getContext:function(){return un(t)},setContext:function(o){mt(o)==="object"?(t=A(o),e&&e.updateCustomerData(t)):r.clearContext(),n.notify()},setContextProperty:function(o,i){t[o]=A(i),e&&e.updateCustomerData(t),n.notify()},removeContextProperty:function(o){delete t[o],e&&e.updateCustomerData(t),n.notify()},clearContext:function(){t={},e&&e.resetCustomerData(),n.notify()},changeObservable:n};return r}var Mi="_dd_c",Ui=[];function wt(e,t,n,r){var o=Di(n,r);Ui.push(Z(e,window,"storage",function(l){var s=l.key;o===s&&i()})),t.changeObservable.subscribe(a),t.setContext(ie(u(),t.getContext()));function i(){t.setContext(u())}function a(){localStorage.setItem(o,JSON.stringify(t.getContext()))}function u(){var l=localStorage.getItem(o);return l!==null?JSON.parse(l):{}}}function Di(e,t){return"".concat(Mi,"_").concat(e,"_").concat(t)}var Pi=3*k,Bi=16*k,Fi=200;function Gi(e){e===void 0&&(e=2);var t=new Map,n=!1;function r(o){if(o===void 0&&(o=0),!(n||e===0)){var i=e===2?Pi:Bi,a=o;t.forEach(function(u){a+=u.getBytesCount()}),a>i&&(ji(i),n=!0)}}return{createDetachedTracker:function(){var o=Ot(function(){return r(o.getBytesCount())});return o},getOrCreateTracker:function(o){return t.has(o)||t.set(o,Ot(r)),t.get(o)},setCompressionStatus:function(o){e===0&&(e=o,r())},getCompressionStatus:function(){return e},stop:function(){t.forEach(function(o){return o.stop()}),t.clear()}}}function Ot(e){var t=0,n=jt(function(a){t=it($(a)),e()},Fi),r=n.throttled,o=n.cancel,i=function(){o(),t=0};return{updateCustomerData:function(a){ut(a)?i():r(a)},resetCustomerData:i,getBytesCount:function(){return t},stop:function(){o()}}}function ji(e){E.warn("Customer data exceeds the recommended ".concat(e/k,"KiB threshold. ").concat(Fe," ").concat(At,"/#customer-data-exceeds-the-recommended-threshold-warning"))}function Hi(e,t,n){var r=e.getReader(),o=[],i=0;a();function a(){r.read().then(b(function(l){if(l.done){u();return}o.push(l.value),i+=l.value.length,i>n.bytesLimit?u():a()}),b(function(l){return t(l)}))}function u(){r.cancel().catch(U);var l,s;{var c;if(o.length===1)c=o[0];else{c=new Uint8Array(i);var f=0;o.forEach(function(d){c.set(d,f),f+=d.length})}l=c.slice(0,n.bytesLimit),s=c.length>n.bytesLimit}t(void 0,l,s)}}var zi="datadog-synthetics-public-id",qi="datadog-synthetics-result-id",Yi="datadog-synthetics-injects-rum";function Tn(){return!!(window._DATADOG_SYNTHETICS_INJECTS_RUM||Y(Yi))}function Ki(){var e=window._DATADOG_SYNTHETICS_PUBLIC_ID||Y(zi);return typeof e=="string"?e:void 0}function Wi(){var e=window._DATADOG_SYNTHETICS_RESULT_ID||Y(qi);return typeof e=="string"?e:void 0}function Rt(e){var t=_({},e),n=["id","name","email"];return n.forEach(function(r){r in t&&(t[r]=String(t[r]))}),t}function Ji(e){var t=mt(e)==="object";return t||E.error("Unsupported user:",e),t}var O;function Be(e,t,n){var r=n.getHandler(),o=Array.isArray(r)?r:[r];return xt[e]>=xt[n.getLevel()]&&V(o,t)}var g={ok:"ok",debug:"debug",info:"info",notice:"notice",warn:"warn",error:"error",critical:"critical",alert:"alert",emerg:"emerg"},xt=(O={},O[g.ok]=0,O[g.debug]=1,O[g.info]=2,O[g.notice]=4,O[g.warn]=5,O[g.error]=6,O[g.critical]=7,O[g.alert]=8,O[g.emerg]=9,O);function je(e,t){var n=t===void 0?{}:t,r=n.includeMessage,o=r===void 0?!1:r;return{stack:e.stack,kind:e.type,message:o?e.message:void 0,causes:e.causes,fingerprint:e.fingerprint,handling:e.handling}}var Vi=function(e,t,n,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(a=e[u])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},de={console:"console",http:"http",silent:"silent"},Xi=Object.keys(g),x=function(){function e(t,n,r,o,i,a){o===void 0&&(o=de.http),i===void 0&&(i=g.debug),a===void 0&&(a={}),this.handleLogStrategy=t,this.handlerType=o,this.level=i,this.contextManager=rt(n),this.contextManager.setContext(a),r&&this.contextManager.setContextProperty("logger",{name:r})}return e.prototype.logImplementation=function(t,n,r,o,i){r===void 0&&(r=g.info);var a=A(n),u;if(o!=null){var l=en({stackTrace:o instanceof Error?N(o):void 0,originalError:o,nonErrorPrefix:"Provided",source:w.LOGGER,handling:"handled",startClocks:P()});u=ie({error:je(l,{includeMessage:!0})},a)}else u=a;this.handleLogStrategy({message:A(t),context:u,status:r},this,i)},e.prototype.log=function(t,n,r,o){r===void 0&&(r=g.info);var i;Be(r,de.http,this)&&(i=Ge()),this.logImplementation(t,n,r,o,i)},e.prototype.setContext=function(t){this.contextManager.setContext(t)},e.prototype.getContext=function(){return this.contextManager.getContext()},e.prototype.setContextProperty=function(t,n){this.contextManager.setContextProperty(t,n)},e.prototype.removeContextProperty=function(t){this.contextManager.removeContextProperty(t)},e.prototype.clearContext=function(){this.contextManager.clearContext()},e.prototype.setHandler=function(t){this.handlerType=t},e.prototype.getHandler=function(){return this.handlerType},e.prototype.setLevel=function(t){this.level=t},e.prototype.getLevel=function(){return this.level},Vi([Qn],e.prototype,"logImplementation",null),e}();x.prototype.ok=M(g.ok);x.prototype.debug=M(g.debug);x.prototype.info=M(g.info);x.prototype.notice=M(g.notice);x.prototype.warn=M(g.warn);x.prototype.error=M(g.error);x.prototype.critical=M(g.critical);x.prototype.alert=M(g.alert);x.prototype.emerg=M(g.emerg);function M(e){return function(t,n,r){var o;Be(e,de.http,this)&&(o=Ge()),this.logImplementation(t,n,e,r,o)}}function $i(e,t){return{view:{referrer:document.referrer,url:window.location.href},context:e.getContext(),user:t.getContext()}}var Qi=32*k;function Zi(e){e.usePciIntake===!0&&e.site&&e.site!=="datadoghq.com"&&E.warn("PCI compliance for Logs is only available for Datadog organizations in the US1 site. Default intake will be used.");var t=$r(e),n=Lt(e.forwardConsoleLogs,Ie(y),"Forward Console Logs"),r=Lt(e.forwardReports,Ie(Me),"Forward Reports");if(!(!t||!n||!r))return e.forwardErrorsToLogs&&!V(n,y.error)&&n.push(y.error),_({forwardErrorsToLogs:e.forwardErrorsToLogs!==!1,forwardConsoleLogs:n,forwardReports:r,requestErrorResponseLengthLimit:Qi,sendLogsAfterSessionExpiration:!!e.sendLogsAfterSessionExpiration},t)}function Lt(e,t,n){if(e===void 0)return[];if(!(e==="all"||Array.isArray(e)&&e.every(function(r){return V(t,r)}))){E.error("".concat(n,' should be "all" or an array with allowed values "').concat(t.join('", "'),'"'));return}return e==="all"?t:Po(e)}function ea(e){var t=Qr(e);return _({forward_errors_to_logs:e.forwardErrorsToLogs,forward_console_logs:e.forwardConsoleLogs,forward_reports:e.forwardReports,use_pci_intake:e.usePciIntake,send_logs_after_session_expiration:e.sendLogsAfterSessionExpiration},t)}function ta(e,t,n){var r=ln(),o,i,a=t.observable.subscribe(u);function u(){if(!(!i||!o||!t.isGranted())){a.unsubscribe();var l=n(o,i);r.drain(l)}}return{init:function(l){if(!l){E.error("Missing configuration");return}if(Zr(l.enableExperimentalFeatures),De()&&(l=na(l)),o=l,i){rn("DD_LOGS",l);return}var s=Zi(l);s&&(i=s,_n().subscribe(U),t.tryToInit(s.trackingConsent),u())},get initConfiguration(){return o},getInternalContext:U,handleLog:function(l,s,c,f,d){f===void 0&&(f=e()),d===void 0&&(d=D()),r.add(function(v){return v.handleLog(l,s,c,f,d)})}}}function na(e){return _({},e,{clientToken:"empty"})}var It="logs";function ra(e){var t=Gi(),n=rt(t.getOrCreateTracker(2)),r=rt(t.getOrCreateTracker(1)),o=kr();function i(){return $i(n,r)}var a=ta(i,o,function(s,c){s.storeContextsAcrossPages&&(wt(c,n,It,2),wt(c,r,It,1));var f=e(s,c,i,o);return a=oa(s,f),f}),u={},l=new x(function(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return a.handleLog.apply(a,s)},t.createDetachedTracker());return xo({logger:l,init:b(function(s){return a.init(s)}),setTrackingConsent:b(function(s){o.update(s),Ko({feature:"set-tracking-consent",tracking_consent:s})}),getGlobalContext:b(function(){return n.getContext()}),setGlobalContext:b(function(s){return n.setContext(s)}),setGlobalContextProperty:b(function(s,c){return n.setContextProperty(s,c)}),removeGlobalContextProperty:b(function(s){return n.removeContextProperty(s)}),clearGlobalContext:b(function(){return n.clearContext()}),createLogger:b(function(s,c){return c===void 0&&(c={}),u[s]=new x(function(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];return a.handleLog.apply(a,f)},t.createDetachedTracker(),A(s),c.handler,c.level,A(c.context)),u[s]}),getLogger:b(function(s){return u[s]}),getInitConfiguration:b(function(){return un(a.initConfiguration)}),getInternalContext:b(function(s){return a.getInternalContext(s)}),setUser:b(function(s){Ji(s)&&r.setContext(Rt(s))}),getUser:b(function(){return r.getContext()}),setUserProperty:b(function(s,c){var f,d=Rt((f={},f[s]=c,f))[s];r.setContextProperty(s,d)}),removeUserProperty:b(function(s){return r.removeContextProperty(s)}),clearUser:b(function(){return r.clearContext()})})}function oa(e,t){return _({init:function(n){rn("DD_LOGS",n)},initConfiguration:e},t)}var ia="logs";function aa(e,t){var n=Zo(e,ia,function(r){return ua(e,r)},t);return{findTrackedSession:function(r,o){o===void 0&&(o={returnInactive:!1});var i=n.findSession(r,o);return i&&i.trackingType==="1"?{id:i.id}:void 0},expireObservable:n.expireObservable}}function sa(e){var t=wn(e)==="1",n=t?{}:void 0;return{findTrackedSession:function(){return n},expireObservable:new C}}function wn(e){return Te(e.sessionSampleRate)?"1":"0"}function ua(e,t){var n=ca(t)?t:wn(e);return{trackingType:n,isTracked:n==="1"}}function ca(e){return e==="0"||e==="1"}var kt=!1;function xe(e){var t=window;if(Tn()){var n=r(t.DD_RUM_SYNTHETICS);return!n&&!kt&&(kt=!0,dn("Logs sent before RUM is injected by the synthetics worker",{testId:Ki(),resultId:Wi()})),n}return r(t.DD_RUM);function r(o){if(o&&o.getInternalContext)return o.getInternalContext(e)}}function la(e,t,n,r,o){var i=Xi.concat(["custom"]),a={};i.forEach(function(u){a[u]=Ei(u,t.eventRateLimiterThreshold,o)}),n.subscribe(0,function(u){var l,s,c=u.rawLogsEvent,f=u.messageContext,d=f===void 0?void 0:f,v=u.savedCommonContext,m=v===void 0?void 0:v,p=u.domainContext,S=zn(c.date),T=e.findTrackedSession(S);if(!(!T&&(!t.sendLogsAfterSessionExpiration||!e.findTrackedSession(S,{returnInactive:!0})))){var L=m||r(),ee=ie({service:t.service,session_id:T?T.id:void 0,session:T?{id:T.id}:void 0,usr:ut(L.user)?void 0:L.user,view:L.view},L.context,xe(S),c,d);((l=t.beforeSend)===null||l===void 0?void 0:l.call(t,ee,p))===!1||ee.origin!==w.AGENT&&((s=a[ee.status])!==null&&s!==void 0?s:a.custom).isLimitReached()||n.notify(1,ee)}})}var j,fa=(j={},j[y.log]=g.info,j[y.debug]=g.debug,j[y.info]=g.info,j[y.warn]=g.warn,j[y.error]=g.error,j);function da(e,t){var n=Ii(e.forwardConsoleLogs).subscribe(function(r){var o={rawLogsEvent:{date:D(),message:r.message,origin:w.CONSOLE,error:r.error&&je(r.error),status:fa[r.api]},domainContext:{handlingStack:r.handlingStack}};t.notify(0,o)});return{stop:function(){n.unsubscribe()}}}function va(e,t){var n=Io(e,e.forwardReports).subscribe(function(r){var o=r.message,i,a=r.originalError.type==="deprecation"?g.warn:g.error;a===g.error?i=je(r):r.stack&&(o+=" Found in ".concat(To(r.stack))),t.notify(0,{rawLogsEvent:{date:D(),message:o,origin:w.REPORT,error:i,status:a}})});return{stop:function(){n.unsubscribe()}}}function pa(e,t){if(!e.forwardErrorsToLogs)return{stop:U};var n=Ci(e).subscribe(function(i){i.state==="complete"&&o("xhr",i)}),r=_n().subscribe(function(i){i.state==="resolve"&&o("fetch",i)});function o(i,a){!Vr(a.url)&&(ba(a)||pn(a.status))&&("xhr"in a?ga(a.xhr,e,u):a.response?ha(a.response,e,u):a.error&&ma(a.error,e,u));function u(l){var s={isAborted:a.isAborted,handlingStack:a.handlingStack};t.notify(0,{rawLogsEvent:{message:"".concat(Sa(i)," error ").concat(a.method," ").concat(a.url),date:a.startClocks.timeStamp,error:{stack:l||"Failed to load",handling:void 0},http:{method:a.method,status_code:a.status,url:a.url},status:g.error,origin:w.NETWORK},domainContext:s})}}return{stop:function(){n.unsubscribe(),r.unsubscribe()}}}function ga(e,t,n){typeof e.response=="string"?n(St(e.response,t)):n(e.response)}function ma(e,t,n){n(St(Q(N(e)),t))}function ha(e,t,n){var r=ri(e);!r||!r.body?n():window.TextDecoder?ya(r.body,t.requestErrorResponseLengthLimit,function(o,i){n(o?"Unable to retrieve response: ".concat(o):i)}):r.text().then(b(function(o){return n(St(o,t))}),b(function(o){return n("Unable to retrieve response: ".concat(o))}))}function ba(e){return e.status===0&&e.responseType!=="opaque"}function St(e,t){return e.length>t.requestErrorResponseLengthLimit?"".concat(e.substring(0,t.requestErrorResponseLengthLimit),"..."):e}function Sa(e){return e==="xhr"?"XHR":"Fetch"}function ya(e,t,n){Hi(e,function(r,o,i){if(r)n(r);else{var a=new TextDecoder().decode(o);i&&(a+="..."),n(void 0,a)}},{bytesLimit:t,collectStreamBody:!0})}function Ea(e,t){if(!e.forwardErrorsToLogs)return{stop:U};var n=new C,r=wo(n).stop,o=n.subscribe(function(i){t.notify(0,{rawLogsEvent:{message:i.message,date:i.startClocks.timeStamp,error:je(i),origin:w.SOURCE,status:g.error}})});return{stop:function(){r(),o.unsubscribe()}}}var Ca=yi,R;function _a(e){function t(n,r,o,i,a){var u=ie(r.getContext(),n.context);if(Be(n.status,de.console,r)&&wa(n,u),Be(n.status,de.http,r)){var l={rawLogsEvent:{date:a||D(),message:n.message,status:n.status,origin:w.LOGGER},messageContext:u,savedCommonContext:i};o&&(l.domainContext={handlingStack:o}),e.notify(0,l)}}return{handleLog:t}}var Ta=(R={},R[g.ok]=y.debug,R[g.debug]=y.debug,R[g.info]=y.info,R[g.notice]=y.info,R[g.warn]=y.warn,R[g.error]=y.error,R[g.critical]=y.error,R[g.alert]=y.error,R[g.emerg]=y.error,R);function wa(e,t){var n=e.status,r=e.message;H[Ta[n]].call(I,r,t)}function Oa(e,t,n,r,o){var i=Cn(e,{endpoint:e.logsEndpointBuilder,encoder:Pe()},e.replica&&{endpoint:e.replica.logsEndpointBuilder,encoder:Pe()},n,r,o.expireObservable);return t.subscribe(1,function(a){i.add(a)}),i}function Ra(e){var t=ht();e.subscribe(1,function(n){t.send("log",n)})}function xa(e){return{get:function(t){var n=e.findTrackedSession(t);if(n)return{session_id:n.id}}}}function La(e){return function(t){e.notify(0,{rawLogsEvent:{message:t.message,date:t.startClocks.timeStamp,origin:w.AGENT,status:g.error}}),dn("Error reported to customer",{"error.message":t.message})}}function Ia(e,t,n,r,o){var i=jo("browser-logs-sdk",t);i.setContextProvider(function(){var f,d,v,m,p,S;return{application:{id:(f=xe())===null||f===void 0?void 0:f.application_id},session:{id:(d=o.findTrackedSession())===null||d===void 0?void 0:d.id},view:{id:(m=(v=xe())===null||v===void 0?void 0:v.view)===null||m===void 0?void 0:m.id},action:{id:(S=(p=xe())===null||p===void 0?void 0:p.user_action)===null||S===void 0?void 0:S.id}}});var a=[];if(De()){var u=ht(),l=i.observable.subscribe(function(f){return u.send("internal_telemetry",f)});a.push(function(){return l.unsubscribe()})}else{var s=Cn(t,{endpoint:t.rumEndpointBuilder,encoder:Pe()},t.replica&&{endpoint:t.replica.rumEndpointBuilder,encoder:Pe()},n,r,o.expireObservable);a.push(function(){return s.stop()});var c=i.observable.subscribe(function(f){return s.add(f,qo(t))});a.push(function(){return c.unsubscribe()})}return zo(),Yo(ea(e)),{telemetry:i,stop:function(){a.forEach(function(f){return f()})}}}function ka(e,t,n,r){var o=new Ca,i=[];o.subscribe(1,function(v){return sn("logs",v)});var a=La(o),u=mi(t),l=t.sessionStoreStrategyType&&!De()&&!Tn()?aa(t,r):sa(t),s=Ia(e,t,a,u,l).stop;i.push(function(){return s()}),pa(t,o),Ea(t,o),da(t,o),va(t,o);var c=_a(o).handleLog;if(la(l,t,o,n,a),De())Ra(o);else{var f=Oa(t,o,a,u,l).stop;i.push(function(){return f()})}var d=xa(l);return{handleLog:c,getInternalContext:d.get,stop:function(){i.forEach(function(v){return v()})}}}var On=ra(ka);Lo(B(),"DD_LOGS",On);const Da=()=>{const{trackEvent:e,isUtagReady:t}=An(),{isChatLoading:n,launchChat:r}=Dn({logger:On.logger});Qe.useEffect(()=>{n&&console.log("Chat is loading")},[n]);const o=()=>{console.log("Chat button clicked - initial handler"),console.log("Firing utag event"),e({ga_event_category:"Lead capture prompt",ga_event_action:"Click - web message",ga_event_label:window.location.pathname||"",tealium_event:"chat_click"},()=>{setTimeout(()=>{console.log("Analytics completed, launching..."),r()},500)})};return n?G.jsx("div",{className:"flex items-center justify-center p-4",children:G.jsx("span",{children:"Loading chat..."})}):G.jsx("button",{id:"chat-with-us-today",onClick:o,className:`${he.cta} secondary-cta dark ${he.browseCta}`,children:G.jsxs("div",{className:`${he.ctaInner}`,children:[G.jsx("div",{className:`${he.icon}`,children:G.jsx("img",{"aria-hidden":"true",src:Nn.src})}),G.jsx("div",{children:"Chat with us today"})]})})};export{Da as default};
